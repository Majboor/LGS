<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="lg.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <title>LGS</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="main-section">
        <div class="container">
            <div class="main-card">
                <div class="card1">
                    <div class="card-body">
                        <h5 class="card-title" style="font-family: sans-serif; font-size: 2rem;"></h5>
                        <p class="card-text" style="font-family: sans-serif; font-size: 1.2rem;"></p>
                        <p class="card-text2" style="font-family: sans-serif; font-size: 1.2rem;"></p>
                        <p class="card-text3" style="font-family: sans-serif; font-size: 1.2rem;"></p>

                        <div id="countdown-timer">
                            <div class="countdown">
                                <div class="countdown__container">
                                    <div class="countdown__item days">
                                        <div class="countdown__number" id="days">00</div>
                                        <div class="countdown__info">Days</div>
                                    </div>
                                    <div class="countdown__item hours">
                                        <div class="countdown__number" id="hours">00</div>
                                        <div class="countdown__info">Hr</div>
                                    </div>
                                    <div class="countdown__item minutes">
                                        <div class="countdown__number" id="minutes">00</div>
                                        <div class="countdown__info">Mins</div>
                                    </div>
                                    <div class="countdown__item seconds">
                                        <div class="countdown__number" id="seconds">00</div>
                                        <div class="countdown__info">Sec</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <style>
                            #countdown-timer {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                margin-top: 20px;
                            }
                            .countdown {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                            }
                            .countdown__container {
                                display: flex;
                                flex-direction: row;
                                gap: 30px;
                            }
                            .countdown__item {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                            }
                            .countdown__number {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                width: 76px;
                                height: 76px;
                                margin-bottom: 16px;
                                border-radius: 10px;
                                background-color: #d32f2f;
                                box-shadow: 0 4px 14px 1px rgba(0, 0, 0, .16);
                                font-size: 32px;
                                font-family: 'Digital Numbers';
                                color: #ffffff;
                            }
                            .countdown__info {
                                font-size: 24px;
                                color: #d32f2f;
                                text-align: center;
                            }
                        </style>

                        <script type="text/javascript">
                            document.addEventListener('DOMContentLoaded', function () {
                                fetch('https://waleed1234.pythonanywhere.com/current_tool')
                                    .then(response => response.json())
                                    .then(data => {
                                        displayTool(data.tool);
                                        initializeClock(new Date(data.next_update_time));
                                    })
                                    .catch(error => console.error('Error fetching data:', error));

                                function initializeClock(endtime) {
                                    function updateClock() {
                                        const t = getTimeRemaining(endtime);
                                        document.getElementById('days').innerHTML = ('0' + t.days).slice(-2);
                                        document.getElementById('hours').innerHTML = ('0' + t.hours).slice(-2);
                                        document.getElementById('minutes').innerHTML = ('0' + t.minutes).slice(-2);
                                        document.getElementById('seconds').innerHTML = ('0' + t.seconds).slice(-2);

                                        if (t.total <= 0) {
                                            clearInterval(timeinterval);
                                            location.reload(); // Reload the page to get the new tool
                                        }
                                    }

                                    updateClock();
                                    const timeinterval = setInterval(updateClock, 1000);
                                }

                                function getTimeRemaining(endtime) {
                                    const total = Date.parse(endtime) - Date.parse(new Date());
                                    const seconds = Math.floor((total / 1000) % 60);
                                    const minutes = Math.floor((total / 1000 / 60) % 60);
                                    const hours = Math.floor((total / 1000 / 60 / 60) % 24);
                                    const days = Math.floor(total / (1000 * 60 * 60 * 24));
                                    return {
                                        total,
                                        days,
                                        hours,
                                        minutes,
                                        seconds
                                    };
                                }

                                function displayTool(tool) {
                                    document.querySelector('.card-title').innerText = tool.title;
                                    document.querySelector('.card-text').innerText = tool.mini_description;
                                    document.querySelector('.card-text2').innerText = tool.description;
                                    document.querySelector('.card-text3').innerText = tool.category;
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('cardButton').addEventListener('click', function() {
            alert('Button clicked!');
        });
    </script>
    <div style="position: fixed; bottom: 10px; right: 10px; font-family: sans-serif; font-size: 1rem; color: #fff; font-style: italic;">
        An Initiative By The AI Society, ChatGPT is just the startâ€”dive into more AI tools!
    </div>
</body>
</html>
